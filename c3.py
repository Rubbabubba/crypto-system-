(full content from c3.py as provided above)